{"componentChunkName":"component---src-templates-blog-post-js","path":"/diagrams-as-code-for-infrastructure-as-code/","result":{"data":{"site":{"siteMetadata":{"title":"Mario Fernandez","description":"This is the blog from Mario Fernandez, a Software Developer working for Meta","author":"Mario Fernandez","url":"https://hceris.com","twitter":"@sirech"}},"post":{"id":"f42e3dc8-bcf7-513a-acdd-8025419f247a","html":"<figure class=\"figure figure--left\">\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/a03e30c0b62e78382df53fc28e41a4b9/eea4a/blueprint.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 66.48936170212765%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIDBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAAB00R6JikS/wD/xAAaEAADAAMBAAAAAAAAAAAAAAAAARECAzEy/9oACAEBAAEFAm4rCmzvoWTR/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8BR//EABURAQEAAAAAAAAAAAAAAAAAAAAS/9oACAECAQE/AVP/xAAYEAACAwAAAAAAAAAAAAAAAAAAEAECEf/aAAgBAQAGPwJ1hYf/xAAaEAADAQADAAAAAAAAAAAAAAAAAREhMXGR/9oACAEBAAE/Ie4PNiRorZlIqpQR8OH/2gAMAwEAAgADAAAAEKAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFhEAAwAAAAAAAAAAAAAAAAAAABFB/9oACAECAQE/EFRKf//EABoQAAIDAQEAAAAAAAAAAAAAAAERACExQVH/2gAIAQEAAT8Qel+BL8Wb4YIF0chEMlpC1BxRdJJx3N7ers//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Blueprint\" title=\"\" src=\"/static/a03e30c0b62e78382df53fc28e41a4b9/acb04/blueprint.jpg\" srcset=\"/static/a03e30c0b62e78382df53fc28e41a4b9/bc01b/blueprint.jpg 188w,\n/static/a03e30c0b62e78382df53fc28e41a4b9/bf173/blueprint.jpg 375w,\n/static/a03e30c0b62e78382df53fc28e41a4b9/acb04/blueprint.jpg 750w,\n/static/a03e30c0b62e78382df53fc28e41a4b9/ec605/blueprint.jpg 1125w,\n/static/a03e30c0b62e78382df53fc28e41a4b9/eea4a/blueprint.jpg 1280w\" sizes=\"(max-width: 750px) 100vw, 750px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n  <figcaption class=\"figure__caption\">\n  a diagram is worth a thousand lines of poorly documented code\n  </figcaption>\n</figure>\n<p>If you’re working with infrastructure, you’re undoubtedly leveraging <a href=\"https://searchitoperations.techtarget.com/definition/Infrastructure-as-Code-IAC\" target=\"_blank\" rel=\"noopener noreferrer\">infrastructure as code</a>, right? I sure hope so. Otherwise, start now. I’ll be waiting.</p>\n<p>A natural evolution might be creating a graphical representation of your infrastructure. Diagrams as code if you will. It is not a new idea. This technique appeared in the <a href=\"https://www.thoughtworks.com/radar/techniques/generated-infrastructure-diagrams\" target=\"_blank\" rel=\"noopener noreferrer\">tech radar</a> back in 2015. You can hark back to that period where people thought that generating code <a href=\"https://softwareengineering.stackexchange.com/questions/124996/is-code-commonly-generated-from-uml\" target=\"_blank\" rel=\"noopener noreferrer\">from UML diagrams</a> was a sensible idea.</p>\n<p>Let’s forget that ever happened! Instead, let’s think about using visualization to understand complex architectures. And maintaining those artifacts up to date while we’re at it. I’m going to talk about a tool that builds on top of <a href=\"https://www.graphviz.org/\" target=\"_blank\" rel=\"noopener noreferrer\">Graphviz</a> called <a href=\"https://diagrams.mingrammer.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Diagrams</a>.</p>\n<h2>What is diagrams?</h2>\n<p>A tool with a very generic name, that’s for sure. If you check its website, it’s described as:</p>\n<blockquote>\n<p>Diagrams lets you draw the cloud system architecture in Python code.</p>\n</blockquote>\n<p>Pretty straight-forward. Installing it is a one-liner.</p>\n<!-- installation -->\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">pip3 <span class=\"token function\">install</span> diagrams</code></pre></div>\n<p>We’re going to create infrastructure diagrams with Python. We’ll commit both the image and the code used to generate them so that everybody in the team can make changes. Let’s get coding, err drawing. I have two examples for you.</p>\n<h2>Alerting workflow</h2>\n<p>Let’s say you have a workflow where you publish alarms to an <a href=\"https://aws.amazon.com/sns/\" target=\"_blank\" rel=\"noopener noreferrer\">SNS Topic</a>. That topic is processed by a <em>lambda function</em>, which transforms the data and writes it back to <em>Cloudwatch</em>. Through an event rule, the right alerts reach our event bus.</p>\n<p>So much text for such a little thing. I’m surprised you’re still paying attention. Let me hit you with a fancy diagram.</p>\n<figure class=\"figure\">\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/4d5de6e54d2e76cb9c5cbcd545fa5c6e/01ccc/alerting_workflow.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 68.08510638297872%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB5klEQVR42q1T3WoTQRjNM+gz+Are+RDe+AYqvoDghbQUKgoiKIKgFi+E0LtaL0SrqIkhhArVQmnSlCZxdyebTdPdzc9kd+fv+GV3EY2loO3A4Tuzw545nG++As5mmbz2C6dSMScIxkKCxzGE1lCKIBIorSCJy4i4VNn3WEATTxed56p/CzoDnxBiMOFwOSHR6HIJNqt03hUaLNZw6NdDZRDFEn0uwNWcoMl91w6+4Hl5GV9ZFf7+Rxyu30C/9Q6d7z00FlfRLjVgN3qwHr1BUGnCh8Tu5w14zuBPQW0y+4837uPi7XN4sfUMR28fwrlagFdaxu7TCr6dv4Lmg3XsrVbQvHAd4b1X2AsHeHJtAW7dnXeoU1aql3H39QKqnSq8Zg314i2wVhXtbRdbS0W0Ng/QrndRW3wJVt7BkHx8+GTD9vjxGfpDgYBF6IdZbpYwcCLKLzF5hoYyNGgLhZ5Qv1qrzXyXdebQKpZhXb4Dd20zDd72p2ATEp8oOHQZG6uUs5GiZshMRZtjnk0uuL/yHtuXbqJTrMCaXRAmsCfU2alJ4XCT7n+MNXpcnfCwcxocjWHvdOAHHKE0CGNF0PBGUzj+iGqEIe0DimGc6P+fFCkF4ihK67+NnvkNp5zl+AwQ0YDMgnV+AowxKSTNwq2TAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"alerting workflow\" title=\"\" src=\"/static/4d5de6e54d2e76cb9c5cbcd545fa5c6e/1d69c/alerting_workflow.png\" srcset=\"/static/4d5de6e54d2e76cb9c5cbcd545fa5c6e/4dcb9/alerting_workflow.png 188w,\n/static/4d5de6e54d2e76cb9c5cbcd545fa5c6e/5ff7e/alerting_workflow.png 375w,\n/static/4d5de6e54d2e76cb9c5cbcd545fa5c6e/1d69c/alerting_workflow.png 750w,\n/static/4d5de6e54d2e76cb9c5cbcd545fa5c6e/78797/alerting_workflow.png 1125w,\n/static/4d5de6e54d2e76cb9c5cbcd545fa5c6e/01ccc/alerting_workflow.png 1399w\" sizes=\"(max-width: 750px) 100vw, 750px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</figure>\n<p>If you check the code, you’ll notice how simple it is. There are three elements.</p>\n<ul>\n<li>The <strong>nodes</strong>, which are single components. It has a recognizable icon and a name.</li>\n<li>The <strong>edges</strong>, which are the connections between components. They can be directed or undirected.</li>\n<li>The <strong>clusters</strong>, which group nodes logically.</li>\n</ul>\n<p>And there is not much else. The diagram is built with this snippet.</p>\n<!-- alerting-workflow -->\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> diagrams <span class=\"token keyword\">import</span> Diagram<span class=\"token punctuation\">,</span> Cluster\n\n<span class=\"token keyword\">from</span> diagrams<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>storage <span class=\"token keyword\">import</span> S3\n<span class=\"token keyword\">from</span> diagrams<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>compute <span class=\"token keyword\">import</span> Lambda\n<span class=\"token keyword\">from</span> diagrams<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>integration <span class=\"token keyword\">import</span> SNS<span class=\"token punctuation\">,</span> Eventbridge\n<span class=\"token keyword\">from</span> diagrams<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>management <span class=\"token keyword\">import</span> Cloudwatch\n<span class=\"token keyword\">from</span> diagrams<span class=\"token punctuation\">.</span>onprem<span class=\"token punctuation\">.</span>queue <span class=\"token keyword\">import</span> ActiveMQ\n\n<span class=\"token keyword\">with</span> Diagram<span class=\"token punctuation\">(</span><span class=\"token string\">\"Alerting Workflow\"</span><span class=\"token punctuation\">,</span> show<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">with</span> Cluster<span class=\"token punctuation\">(</span><span class=\"token string\">'main account'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        topic <span class=\"token operator\">=</span> SNS<span class=\"token punctuation\">(</span><span class=\"token string\">'SNS Topic'</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">with</span> Cluster<span class=\"token punctuation\">(</span><span class=\"token string\">'Lambda'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            l <span class=\"token operator\">=</span> Lambda<span class=\"token punctuation\">(</span><span class=\"token string\">'processor'</span><span class=\"token punctuation\">)</span>\n            topic <span class=\"token operator\">>></span> l\n            S3<span class=\"token punctuation\">(</span><span class=\"token string\">'lambda source'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> l\n\n        cl <span class=\"token operator\">=</span> Cloudwatch<span class=\"token punctuation\">(</span><span class=\"token string\">'Cloudwatch'</span><span class=\"token punctuation\">)</span>\n        l <span class=\"token operator\">>></span> cl\n\n        event <span class=\"token operator\">=</span> Eventbridge<span class=\"token punctuation\">(</span><span class=\"token string\">'Cloudwatch\\nevent rule'</span><span class=\"token punctuation\">)</span>\n        cl <span class=\"token operator\">>></span> event\n\n    <span class=\"token keyword\">with</span> Cluster<span class=\"token punctuation\">(</span><span class=\"token string\">'Event Bus'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        event_bus <span class=\"token operator\">=</span> ActiveMQ<span class=\"token punctuation\">(</span><span class=\"token string\">'bus'</span><span class=\"token punctuation\">)</span>\n        event <span class=\"token operator\">>></span> event_bus</code></pre></div>\n<p>Notice how quickly you can get a decent overview of your system with a just bit of Python.</p>\n<h2>Network diagrams</h2>\n<p>Networking seems to be uniquely suited for this approach. While researching <a href=\"../understanding-vpc-endpoints/\">VPC endpoints</a>, I realized that a clear drawing aids understanding significantly.</p>\n<p>Let’s say we are connecting to a <a href=\"https://kubernetes.io/\" target=\"_blank\" rel=\"noopener noreferrer\">Kubernetes</a> cluster because that’s what we all do these days. We’re routing a bunch of different domains to a VPC endpoint. The cluster resides in a different account, so we use an endpoint service to make it available. Add a few more routes, and the whole thing becomes a tangled mess, much like the pile of cables behind your desk. That is until you see this diagram.</p>\n<figure class=\"figure\">\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/3f7f57c9d4c83e5f6f872e57d72cfa58/061c7/connecting_two_accounts.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 103.72340425531914%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAACXBIWXMAAAsTAAALEwEAmpwYAAACn0lEQVR42qWUS08TURTH+Sau/AAmJu6Ie000MepGFybEmPgFlF3jAxQwBqMsDIsmJIARmypBYAE0KgTaSoW+qNN2Zjqv+5yZO8PMtHQGpkVUGgJRTs7i3tz88v+fe+49XbuniK7jj4N2/iscnAQehqFhS4RRt0k9n3oBdgPd84HOsO2xum/Wm6bXMLyG3Wh2wC0FmWoFMQscIBi2qBNtm0mmxUMV2AhYRKZUsVyJuYDZh+Cg7S67juIjQiKGFcZqFSJsEaBTrqivTdOtpE0UAyVnyOoU1sTdA6YF+35rNTshPr5ZHH2g8shYmdUWJlVJo+/fcpErxXf9ppovKEPdxuvzePNTG24eKLfh9Ko0ElmLRzlJZ6mElojLKtI/jnG9V5Pjz1XI8Vzf5drgRZhfasP+nwsLXbC6rjdq+o4mYgMIBFQxJIYo4ly6xpcwhW4lVy6tFzBhHTW3lDfTMPZGSHxAZUTjSXliWcqLGEBWFZkkWVhzMKxj0EDU/t3Cv2sWHt0oRHu1jIS6X30782Rh6jsfXamcG/pyd/yHAV2kOUh1ELUOK/+qWR6JpGbGqjmVXh9NXXixPJeVXi6WzvYvXRtN6cDDmotUt1N5fwNtzKEsboCabkoEigQBg6TKILpcmd+QCbTCdkONIf2omitV+HWukltHItUzq2I6IfMyphY2wn6bEDE1TGgq2KJH2F6My8P3qpN9uMjjgZ780G1pI0mWPguDd8qxYY04KrJUyBRsHwUvTFcjt9aiTyucSp/dTw705LKbMBbdengpM94vIPsA7lDeD2yyQokXFYQdV4FYlCG2Wa4gz8d+ZpISssKuAWBqxDJO+JKhk23HMUzGti2nboeXstP097PpBycPgxDwWxG0XkHwX5PkVGPoeHgPVUiGXPVlN3sAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"connecting accounts\" title=\"\" src=\"/static/3f7f57c9d4c83e5f6f872e57d72cfa58/1d69c/connecting_two_accounts.png\" srcset=\"/static/3f7f57c9d4c83e5f6f872e57d72cfa58/4dcb9/connecting_two_accounts.png 188w,\n/static/3f7f57c9d4c83e5f6f872e57d72cfa58/5ff7e/connecting_two_accounts.png 375w,\n/static/3f7f57c9d4c83e5f6f872e57d72cfa58/1d69c/connecting_two_accounts.png 750w,\n/static/3f7f57c9d4c83e5f6f872e57d72cfa58/78797/connecting_two_accounts.png 1125w,\n/static/3f7f57c9d4c83e5f6f872e57d72cfa58/061c7/connecting_two_accounts.png 1216w\" sizes=\"(max-width: 750px) 100vw, 750px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</figure>\n<p>Better, isn’t it? What about the code used to generate it?</p>\n<!-- connecting-accounts -->\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> diagrams <span class=\"token keyword\">import</span> Cluster<span class=\"token punctuation\">,</span> Diagram\n<span class=\"token keyword\">from</span> diagrams<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>network <span class=\"token keyword\">import</span> VPC<span class=\"token punctuation\">,</span> PublicSubnet<span class=\"token punctuation\">,</span> PrivateSubnet<span class=\"token punctuation\">,</span> Endpoint<span class=\"token punctuation\">,</span> ELB<span class=\"token punctuation\">,</span> Route53\n<span class=\"token keyword\">from</span> diagrams<span class=\"token punctuation\">.</span>aws<span class=\"token punctuation\">.</span>compute <span class=\"token keyword\">import</span> EKS\n\n<span class=\"token keyword\">with</span> Diagram<span class=\"token punctuation\">(</span><span class=\"token string\">\"Connecting two accounts\"</span><span class=\"token punctuation\">,</span> show<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">with</span> Cluster<span class=\"token punctuation\">(</span><span class=\"token string\">\"Account 1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">with</span> Cluster<span class=\"token punctuation\">(</span><span class=\"token string\">\"Hosted Zone\\nmain.io\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            star <span class=\"token operator\">=</span> Route53<span class=\"token punctuation\">(</span><span class=\"token string\">\"*.test.main.io\"</span><span class=\"token punctuation\">)</span>\n            subdomain <span class=\"token operator\">=</span> Route53<span class=\"token punctuation\">(</span><span class=\"token string\">\"test.main.io\"</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">with</span> Cluster<span class=\"token punctuation\">(</span><span class=\"token string\">\"Hosted Zone\\nalt.dev\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            alt <span class=\"token operator\">=</span> Route53<span class=\"token punctuation\">(</span><span class=\"token string\">\"other.alt.dev\"</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">with</span> Cluster<span class=\"token punctuation\">(</span><span class=\"token string\">\"VPC\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            VPC<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token keyword\">with</span> Cluster<span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                PrivateSubnet<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n                endpoint <span class=\"token operator\">=</span> Endpoint<span class=\"token punctuation\">(</span><span class=\"token string\">\"VPC Endpoint\"</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">[</span>star<span class=\"token punctuation\">,</span> subdomain<span class=\"token punctuation\">,</span> alt<span class=\"token punctuation\">]</span> <span class=\"token operator\">>></span> endpoint\n\n    <span class=\"token keyword\">with</span> Cluster<span class=\"token punctuation\">(</span><span class=\"token string\">\"Account 2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">with</span> Cluster<span class=\"token punctuation\">(</span><span class=\"token string\">\"VPC\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            VPC<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token keyword\">with</span> Cluster<span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                PrivateSubnet<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n                service <span class=\"token operator\">=</span> ELB<span class=\"token punctuation\">(</span><span class=\"token string\">\"VPC\\nEndpoint Service\"</span><span class=\"token punctuation\">)</span>\n                cluster <span class=\"token operator\">=</span> EKS<span class=\"token punctuation\">(</span><span class=\"token string\">\"Kubernetes\\nCluster\"</span><span class=\"token punctuation\">)</span>\n\n                endpoint <span class=\"token operator\">>></span> service <span class=\"token operator\">>></span> cluster</code></pre></div>\n<p>The amount of code used to represent it has grown compared to the previous example. Luckily, using <em>Python</em> gives us access to functions, comprehensions, and other tools to manage this complexity.</p>\n<h2>The curious case of the diagram that could not be updated</h2>\n<p>That’s how you use <em>Diagrams</em>. Is it really valuable? I certainly like the pretty icons. Apart from that, it shines in enabling visual documentation to evolve.</p>\n<p>I’ve tried to digitalize technical diagrams before. I really tried. <a href=\"https://www.sketch.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Sketch</a>, <a href=\"https://sketchboard.io/\" target=\"_blank\" rel=\"noopener noreferrer\">sketchboard</a>, or even just taking a picture of a hand-drawn diagram. It works until you need to update it, and you don’t have the source. Perhaps it was done by somebody else, who preferred a completely different tool. I’ve often seen a project’s documentation get more and more out of date because nobody can update the damn diagrams. If it’s just source code, your chances get a lot better.</p>\n<h2>Conclusion</h2>\n<p><em>Diagrams</em> is a neat, albeit limited tool. You can’t add much more than what I’ve shown. While that is constraining, it can protect you from yourself. Overly complicated diagrams do more harm than good. If you are representing the system in its entirety, why not check the code directly? The point of abstraction is to make it simpler to understand by omitting some of the details.</p>\n<p>In summary, it’s a convenient way to bring clarity into your impenetrable READMEs, and you’ll be able to update the images as your code evolves.</p>","frontmatter":{"layout":"post","title":"Diagrams as code for infrastructure as code","path":"/diagrams-as-code-for-infrastructure-as-code/","categories":["Infrastructure as Code","Diagrams as Code","Documentation"],"date":"2020/09/09","draft":false,"description":"Diagrams is a neat tool to visualize your infrastructure using code. Using code allows easy modification and is version control friendly","canonical":null,"image":null}},"related":{"nodes":[{"frontmatter":{"title":"An overview of IAM in AWS","path":"/aws-iam-an-overview/","date":"2019/03/09"}},{"frontmatter":{"title":"Book Review: Accelerate","path":"/book-review-accelerate/","date":"2021/03/07"}}]},"previous":{"frontmatter":{"title":"Book Review: The Rust programming language","path":"/book-review-the-rust-programming-language/","date":"2020/09/20"}},"next":{"frontmatter":{"title":"Technical stories, a miscast artifact of agile development","path":"/technical-stories-a-miscast-artifact-of-agile-development/","date":"2020/09/24"}}},"pageContext":{"related":["/aws-iam-an-overview/","/book-review-accelerate/"],"previous":"/book-review-the-rust-programming-language/","next":"/technical-stories-a-miscast-artifact-of-agile-development/"}},"staticQueryHashes":[],"slicesMap":{}}
{"componentChunkName":"component---src-templates-blog-post-js","path":"/a-directory-structure-for-react-projects/","result":{"data":{"site":{"siteMetadata":{"title":"Mario Fernandez","description":"This is the blog from Mario Fernandez, a Software Developer working for ThoughtWorks","author":"Mario Fernandez","url":"https://hceris.com","twitter":"@sirech"}},"post":{"id":"fe37054f-2f55-5603-925e-bada326a32b7","html":"<figure class=\"figure figure--left\">\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/19597ce04f3b3a49f5f8812a8ff44799/c3fd4/react-folders.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4ElEQVQoz2WSzWtTURDFb2q1BbF+gBSJ2YhFxQ/sSUwVaqyCtCIWrR/UtNqTKtauShFdi6Diyq0uBXGhgoIuxX/ApSL0PEFc6driojNC5L68h9EMHO6Fxzv3d2YmhBAC5Zksk5+nfIqyVZRXKFuY+fyrNP7oRTgwXNsMYAzAMQCrAYRcaTHx0EgsnoV4Z+J7KZ+krEjZU8ovUL6LSyv1iWfvwsHRk5sAlAEMAOjuNFRuaF1MUrpDlF+nfILyN5TfpfwEZfMzn5bTf4aOj60BBvsBbAHQ20FIWSGNmsR4vkD5K8ofUn6K8nnK3jLxB5Sdnf3a7Dk6txjKlcp+AHUAOzPDQkaY983WUnankT7gtyg7R9ky5YuU36Osh4nXKRud/vAjVGsj2zKzvo7IlBeycyRGo+w5Zfcpm6b8GmWR+DZldWql7+L7pVCuDm1Fq/pzwpSyFdVCIzdN/DBlNymfo+wJZTHqpUga6a9+b4beEKLBIIDTAEr/DCYz+X/KZyhfR/nrbIWKKW3i4fLHn13jj18GlMtxZYoAdgDYmN1L7YPJ1U3ZFOVXKF9P+TBlNygfiN8bX34XypVKThT7dwTAPgC7AdRCXtmU28z9r1p7mq7X7LdmaIu4IevjHgDbAVT/ABBgWST0Y2ceAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"React folders\" title=\"React folders\" src=\"/static/19597ce04f3b3a49f5f8812a8ff44799/1d69c/react-folders.png\" srcset=\"/static/19597ce04f3b3a49f5f8812a8ff44799/4dcb9/react-folders.png 188w,\n/static/19597ce04f3b3a49f5f8812a8ff44799/5ff7e/react-folders.png 375w,\n/static/19597ce04f3b3a49f5f8812a8ff44799/1d69c/react-folders.png 750w,\n/static/19597ce04f3b3a49f5f8812a8ff44799/c3fd4/react-folders.png 854w\" sizes=\"(max-width: 750px) 100vw, 750px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</figure>\n<p>I’ve answered a variation of the question “How do you organize your components in a <em>React</em> project?” a few times in our internal mailing lists over the last months. I wanted to share the structure that I have been using in my last projects.</p>\n<p>I have a <a href=\"https://github.com/sirech/cookery2-frontend\" target=\"_blank\" rel=\"noopener noreferrer\">small project</a> that serves as an example. It is based around two simple concepts:</p>\n<ul>\n<li>Folders are Features</li>\n<li>Using <code class=\"language-text\">index.ts</code> to differentiate between public and private components.</li>\n</ul>\n<h2>Folders are features</h2>\n<p>I used to call this <em>structuring components vertically</em>, but this name is more catchy! The idea is to move away from a functional structure, where you have things like <code class=\"language-text\">controllers</code>, <code class=\"language-text\">models</code>, or <code class=\"language-text\">services</code>. Instead, you group your code around features. A folder contains all that is needed to understand a particular feature in your app. The code maps the domain more closely. If you like <a href=\"https://en.wikipedia.org/wiki/Domain-driven_design\" target=\"_blank\" rel=\"noopener noreferrer\">domain-driven design</a>, that should be music to your ears.</p>\n<p>Let’s have a look at one example. I have a view to show the details of a recipe, including the ingredients, and a list of steps. The data is fetched from the backend through a service. The page roughly looks like this:</p>\n<figure class=\"figure\">\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 550px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f2a2c6b98e22658f6e1dccad2d766381/dd45a/recipe-details.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 93.08510638297872%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAACUElEQVQ4y4VU227TUBB00lzq5p42obSqmkIkkIIVfGbWTpQ89AEBLxFCiF/oOx/Ev6JJ1+E0tCLSxsc+e5m9zCabzSYBsBeSz8pL96vVKjGzOsmGntJJttutLk8AtEh2SQ5dRiTHJM9JvgZw5eex38X3YwCvQghNRTghKeUBydQdSxokL8zsBsAnAF8B6CwHQtWW7W63qxD3SZ4lRVHoom9mh7SqMwAhKEneuxjJSwC1WDdymMroFMAgrpOflf60LMu+UIUQpmZ27uVQoJ47qrm+9FJFSCuEUbTEazRcLpcykJP3IYRunuc1pUtyctSsR4T685cY3d6A5JzkW5J3RVF0AcwBvCN563WfuvOk6kESQkhDCP0QQhUp9a7eSUIIUhw4Mp1bABZKkWSnAuNl+5tyURQVfCmc+vNaSmamlJuO8gOA7wC+eP17TxDGKXu6PTkB8BPALwD3Pk5tNQpADuABwDcza0fNedFh3yPL2W8AP1arVVPGeZ4r2EfVUQ6dCM87jGZPRmeafABvNDKqj1ggYwC3PuSfATS9lv80RUU/tN8RxhwehxDqZjZ25wNnipiUenaPcyi6KLIQrtfrxOty6WMzrZ6imSPq+dArqw6AhpjjCHuiXtMNhk61kTu89oVwE83chQ95tRxGzm3ZTQSm4q3Wjwpfz7KsdsSYSbSBrsqyfMKoeK3p++FjRb0sy2LF1GsaD33X32vHDiX7usVbQ4zRkEs89Y43qWNmSnOe53ldevuF+r+flBaLRTKbzZJq4aqzZtZ1x614Ao5/fwAFA/MdYf/MAgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Recipe details\" title=\"Recipe details\" src=\"/static/f2a2c6b98e22658f6e1dccad2d766381/dd45a/recipe-details.png\" srcset=\"/static/f2a2c6b98e22658f6e1dccad2d766381/4dcb9/recipe-details.png 188w,\n/static/f2a2c6b98e22658f6e1dccad2d766381/5ff7e/recipe-details.png 375w,\n/static/f2a2c6b98e22658f6e1dccad2d766381/dd45a/recipe-details.png 550w\" sizes=\"(max-width: 550px) 100vw, 550px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</figure>\n<p>In my code, I will group the whole feature in one folder, this way:</p>\n<!-- recipe-details -->\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">recipe-details\n├── Ingredients.tsx\n├── RecipeDetails.test.tsx\n├── RecipeDetails.tsx\n├── Steps.tsx\n├── __mocks__\n│   └── recipeDetails.service.ts\n├── index.ts\n└── recipeDetails.service.ts</code></pre></div>\n<p>The main component is <code class=\"language-text\">RecipeDetails</code>. There are other smaller components, <code class=\"language-text\">Ingredients</code> and <code class=\"language-text\">Steps</code>. There is a service that talks to an API, some tests, and mocks. By looking at this folder, I’m able to understand this feature without having to comb through multiple parts of my application.</p>\n<h3>Scaling it up</h3>\n<p>As your application gets more complex, these folders might grow to a point where there are too many files in one folder. Extracting components helps to keep them small.</p>\n<p>Another optimization we did in one project was to introduce the concept of <code class=\"language-text\">pages</code>. A page is just like a feature but is associated with a URL. Having your code broken down in pages aligns well with how users see your app, and it lends itself to code splitting down the line.</p>\n<h2>Use index.ts to differentiate between public and private components</h2>\n<p>With <em>TypeScript</em>, you don’t have a way to group code in packages like you could do in something like <em>Kotlin</em>. You can simulate it with folders, though. I like to use the <code class=\"language-text\">index.ts</code> for a folder as an entry point. You can only import components from the outside <strong>if</strong> they are exported there. Coming back to our <code class=\"language-text\">recipe-details</code>, the only component I want to export is <code class=\"language-text\">RecipeDetails</code>, so my <code class=\"language-text\">index.ts</code> looks like this:</p>\n<!-- index.ts -->\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./RecipeDetails'</span></code></pre></div>\n<p>which I import from the main <code class=\"language-text\">App.tsx</code> like this:</p>\n<!-- import -->\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> RecipeDetails <span class=\"token keyword\">from</span> <span class=\"token string\">'recipe-details'</span></code></pre></div>\n<p>This convention is enforced with <a href=\"https://eslint.org/\" target=\"_blank\" rel=\"noopener noreferrer\">eslint</a>, with the help of the <a href=\"https://github.com/benmosher/eslint-plugin-import/blob/master/docs/rules/no-internal-modules.md\" target=\"_blank\" rel=\"noopener noreferrer\">eslint-plugin-import</a> plugin. It is not a proper package system, but it works pretty well in practice.</p>\n<p>Both <code class=\"language-text\">Ingredients</code> and <code class=\"language-text\">Steps</code> are private components. They are intended to be used only in the context of this folder to make sure that all the components remain small. They don’t have dedicated tests but are rather tested as part of the whole feature following the principles of <a href=\"https://github.com/testing-library/react-testing-library\" target=\"_blank\" rel=\"noopener noreferrer\">React Testing Library</a>.</p>\n<h3>Use absolute imports for public components</h3>\n<p>It just makes refactorings a lot easier.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> Navigation <span class=\"token keyword\">from</span> <span class=\"token string\">'navigation'</span></code></pre></div>\n<p>It is done with a small adjustment in the <code class=\"language-text\">tsconfig.json</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"include\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"src\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Generic components under <code class=\"language-text\">components</code></h2>\n<p>Beware of over-abstraction! Don’t try to create components that are too generic. It will end up bringing more complexity. If you do in fact have some components that can be reused, I like to put them in a <code class=\"language-text\">components</code> folder:</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">components\n├── adapter-link\n│   ├── AdapterLink.tsx\n│   └── index.ts\n└── recipe\n    ├── Recipe.test.tsx\n    ├── Recipe.tsx\n    ├── index.ts\n    └── types.ts</code></pre></div>\n<h2>Don’t be afraid to tinker</h2>\n<p>Nothing is set in stone. Keep the components small. Don’t let folders get too big. Group them when it makes sense. And give <a href=\"../book-review-effective-typescript/\">Effective TypeScript</a> a read, it’s a really good book.</p>","frontmatter":{"layout":"post","title":"A directory structure for React projects","path":"/a-directory-structure-for-react-projects/","categories":["React","TypeScript","Code Organization"],"date":"2020/07/19","draft":false,"description":"How do you structure your components in a React application? I like to group mine around features close to the domain enforced by convention","canonical":null,"image":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#080808","images":{"fallback":{"src":"/static/19597ce04f3b3a49f5f8812a8ff44799/2d0d9/react-folders.png","srcSet":"/static/19597ce04f3b3a49f5f8812a8ff44799/288a4/react-folders.png 188w,\n/static/19597ce04f3b3a49f5f8812a8ff44799/5b629/react-folders.png 375w,\n/static/19597ce04f3b3a49f5f8812a8ff44799/2d0d9/react-folders.png 750w","sizes":"(min-width: 750px) 750px, 100vw"},"sources":[{"srcSet":"/static/19597ce04f3b3a49f5f8812a8ff44799/c1439/react-folders.webp 188w,\n/static/19597ce04f3b3a49f5f8812a8ff44799/19938/react-folders.webp 375w,\n/static/19597ce04f3b3a49f5f8812a8ff44799/280d5/react-folders.webp 750w","type":"image/webp","sizes":"(min-width: 750px) 750px, 100vw"}]},"width":750,"height":376}}}}},"related":{"nodes":[{"frontmatter":{"title":"Playing with CSS Grid","path":"/playing-with-css-grid/","date":"2018/04/28"}},{"frontmatter":{"title":"Custom Components in Formik","path":"/custom-components-in-formik/","date":"2019/08/15"}},{"frontmatter":{"title":"Fail a test in Jest if an unexpected network request happens","path":"/jest-fail-test-if-unexpected-network-request-happens/","date":"2019/12/08"}}]},"previous":{"frontmatter":{"title":"Templating Concourse pipelines with Jsonnet: Follow-up","path":"/templating-concourse-pipelines-with-jsonnet-follow-up/","date":"2020/06/12"}},"next":{"frontmatter":{"title":"Book Review: The software architect elevator","path":"/book-review-software-architect-elevator/","date":"2020/07/26"}}},"pageContext":{"related":["/jest-fail-test-if-unexpected-network-request-happens/","/custom-components-in-formik/","/playing-with-css-grid/"],"previous":"/templating-concourse-pipelines-with-jsonnet-follow-up/","next":"/book-review-software-architect-elevator/"}},"staticQueryHashes":[]}
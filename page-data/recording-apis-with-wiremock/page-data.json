{"componentChunkName":"component---src-templates-blog-post-js","path":"/recording-apis-with-wiremock/","result":{"data":{"site":{"siteMetadata":{"title":"Mario Fernandez","description":"This is the blog from Mario Fernandez, a Software Developer working for Meta","author":"Mario Fernandez","url":"https://hceris.com","twitter":"@sirech"}},"post":{"id":"cadcfd59-4e53-56d7-bb00-ce2642ac16de","html":"<figure class=\"figure figure--right\">\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 512px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f848aea11cf8e83b7deb3b37a8b8ed63/01e7c/cassette.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEWElEQVR42qWUa0xbZRjH2eDTguLIyMYcgXG/lDsUKCVA6YW20EEvQOm9tFBGgI4OaItcphJSP4wEmFWBzES5xnQRkxlqhOgHzJwExQ10C1kUjSwzGqNEwuk5j88h0kynovEk73nfk7z/3/t/n/M8T0DA/3uO9/f3H//PKlqkUCgCcQ6iR3FxfxD9/W+0xx4X0mN+Hv5WGBkZ+UxeXt7pJyAAcOyfThGzQ052XSxNMWm4Arm80ipVqF+RSCRekUj0gMPhfBoaGvr0IesP8VBVV4fbbfrczs5mRXt7+3PttsE3rd2jt1o6J74xXJreNzmWwNx/F3Q9G1Al01ASiRgEAgGZnZ3NPAxNgMFgCNPrjXMu19DnTufAjs1+g3AOfgYO1zZcGnwElhd+BuPzv4LS+YhU9X5PKB3fEoqOO8QFuYni80p9HE4Z5Obm6mngQVyVSmWi0+kkr1+fBFtnL9Vk+wJa+370NTq+JnSX1wl12yJRd3GOrNYNQ4momeIK6ygOV+iLiY3biYiIWMc4fpmQkHD18JYBxcXFp1yul3bGxq6Bw95NaI1XSL35CqHSNBEKuYwqK2VDZmo0nDn11HKFWLA2PHwVJicnYWho6Na5qChBSEhIVXp6+pQ/fhUVFSeMRuNmo9kItQop2WFtgonxa+B+eQx6nV1Qyk4jWTmJwC1lT3g8b6+7XC7v1NTU60tLSzA9PW1DxMmioqI3YmNjY/x/Q6upX7Y0GqDF0kDOzs5S0zNzq3Nzcx8sLLyzb23RQ3rSs6BRSh/e3di4X6tS8VESNTIy8sDtdk/iuigrK2sUXfL9QKNe7elot0Bfjw1WVlZ+mJmZ1+DD9nhu3OuxWyEp9gzk5TI+vr+19f7q6ifb7968edvrXfzOPT7OPHs61JiYGP9efHy8yQ9Uq5TuPqcVOq0mwvPWFKytrW16vd7lyYlX95hZiVR6ynlITY5bUKlUysHBF79y2LtALBLeYTAYH2ZkZGxlZmYCg5H2mh9YXV3d29FmBoet0ddq0cBAbzc47ZehSiIEUTkPpNILIJfJduVy+S6PxyUKCgp8BQUsYDKZgFf1IRSBjI/8QMx6Q3NzE7S1tlBmsxlqa2vJ+vp6X0ODCb8bAfMU6urqACsDysrKAH8CDaMwdr7U1FRfWloa4PwQ0+jsARA3iq1WK1gszSQtpKE6nY4Gg1AohJKSEmCxWCQ6I7B2CayMfYTtoau9pKSkfXRJFhYWQnR0NPsAiOWTpdNpQavVUjU1NaTRaPBhwvsqKysJPIxAVwRCKTabDfn5+YAwoK+JrgCTmsKZhm75U4fH453HsvlFrVZjfUooPp8PMpnswBmXywX6dBRRKSkpP6HwHjpbxPUowlrj4uLEOJLCw8NP+GMYFhYWjMLN8vJy2sEuOtjOycm5jZAZFA4kJyfXx8TEsNDBOdwedGQPpF8Yi0wUS7E2M4KDg8P+3Ir+QhP4e5MNPGLvkw33MeGR7f432+Hy9IUc9gkAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Recording the API\" title=\"\" src=\"/static/f848aea11cf8e83b7deb3b37a8b8ed63/01e7c/cassette.png\" srcset=\"/static/f848aea11cf8e83b7deb3b37a8b8ed63/4dcb9/cassette.png 188w,\n/static/f848aea11cf8e83b7deb3b37a8b8ed63/5ff7e/cassette.png 375w,\n/static/f848aea11cf8e83b7deb3b37a8b8ed63/01e7c/cassette.png 512w\" sizes=\"(max-width: 512px) 100vw, 512px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</figure>\n<p>When an application depends on a third party API, you always seem to face similar challenges. Do you integrate against it, even in development? What about the tests, won’t they be flaky if the API needs to be there?</p>\n<p>Meanwhile, if you decide to use stubs, how sure are you that the application is, well, working? I can’t remember how many times I have had perfectly green tests based on mocks that were not testing anything, because the API had changed in some way.</p>\n<p>Recently I’ve been thinking about this, and I have tried to address this through API recordings.\nI know this idea from the Ruby world, concretely <a href=\"https://github.com/vcr/vcr\" target=\"_blank\" rel=\"noopener noreferrer\">VCR</a>. This time, however, I wanted to use it in a <em>Java</em> project, so I looked at <a href=\"http://wiremock.org/\" target=\"_blank\" rel=\"noopener noreferrer\">WireMock</a>.</p>\n<!--more-->\n<h2>Why?</h2>\n<p>Following the <a href=\"https://martinfowler.com/bliki/TestPyramid.html\" target=\"_blank\" rel=\"noopener noreferrer\">Testing Pyramid</a>, we want to have most of our tests at the lowest possible level. Unit tests should not be doing network requests. On the other hand, if we use mocks, they should be close to the source, ideally based on actual requests.</p>\n<p>If we have these mocks already, why not use them for our local development? I want my app to boot and quickly show something, again without the need to connect to the outside.</p>\n<p>And, I want automation. Editing <code class=\"language-text\">.json</code> files by hand is a recipe for errors and outdated data. I want to avoid friction.</p>\n<p>Thanks to <em>WireMock</em>, this process is very convenient and almost transparent to the app. A bit of plumbing is required, but it is <em>real easy</em> to do.</p>\n<h2>Mock me!</h2>\n<p>I have this <a href=\"https://github.com/sirech/example-wiremock-recorder\" target=\"_blank\" rel=\"noopener noreferrer\">repository in Github</a> with all the details. It can be summarized in one picture:</p>\n<figure class=\"figure\">\n  <img src=\"https://github.com/sirech/example-wiremock-recorder/raw/master/images/diagram.png\" alt=\"Recording the API\">\n</figure>\n<p>For the example API, I took this very useful <a href=\"https://jsonplaceholder.typicode.com/\" target=\"_blank\" rel=\"noopener noreferrer\">sample API</a>. There are four pieces to take into account in this setup.</p>\n<h3>Production</h3>\n<p>The app in <code class=\"language-text\">production</code> mode goes directly to the API, just like that. The request is something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Todo</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">todos</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">List</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Todo</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> response <span class=\"token operator\">=</span> template<span class=\"token punctuation\">.</span><span class=\"token function\">exchange</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string\">\"/todos\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token class-name\">HttpMethod</span><span class=\"token punctuation\">.</span><span class=\"token constant\">GET</span><span class=\"token punctuation\">,</span>\n            <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">ParameterizedTypeReference</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">List</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Todo</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">getBody</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Development</h3>\n<p>For the development server, we rely on certain mocks being present, that we will serve transparently by starting a <em>WireMock</em> server on startup. To do that in a <a href=\"https://spring.io/projects/spring-boot\" target=\"_blank\" rel=\"noopener noreferrer\">Spring Boot</a> project, we use this initializer:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Component</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MockServerInitializer</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${mock.active}\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">boolean</span> active<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${mock.port}\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">int</span> port<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@EventListener</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onApplicationEvent</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ContextRefreshedEvent</span> event<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>active<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">WireMockServer</span> server <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WireMockServer</span><span class=\"token punctuation\">(</span>port<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            server<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>It is important to set <code class=\"language-text\">mock.active</code> to <code class=\"language-text\">false</code> for any non-development environment. Other than that, the configuration points to the local server instead of the real API:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">serverUrl</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//localhost<span class=\"token punctuation\">:</span>$<span class=\"token punctuation\">{</span>mock.port<span class=\"token punctuation\">}</span>\n<span class=\"token key atrule\">mock</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">active</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8080</span></code></pre></div>\n<h3>Unit tests</h3>\n<p>The unit tests that need to use this mock data will use the same mocks from <em>WireMock</em> that the development server uses. Activating the mocks is as easy as inheriting from the <code class=\"language-text\">RecordedTest</code> class, which looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RecordedTest</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${record.port}\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">int</span> port<span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">WireMockServer</span> server<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Before</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">useMocks</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        server <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WireMockServer</span><span class=\"token punctuation\">(</span>port<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        server<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@After</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">stopUsingMocks</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        server<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Inheritance and <code class=\"language-text\">@Before</code> and <code class=\"language-text\">@After</code> annotations is perhaps not a best practice, but it makes the tests really succint. Defining additional behavior is easy by just defining extra <em>WireMock</em> rules. This way you can test more specific scenarios like timeouts while keeping most of the regular code quite clean.</p>\n<h3>Integration tests</h3>\n<p>This is where everything comes together. Our integration tests make sure that the connection to the real API works. In the process, the interactions get recorded so that we can store that as the mocks that the rest of the app uses. To enable a test to become a <code class=\"language-text\">RecordingTest</code>, you need to inherit the class:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RecordingTest</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${record.port}\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">int</span> port<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">abstract</span> <span class=\"token class-name\">String</span> <span class=\"token function\">recordingServerUrl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${record.persist}\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">boolean</span> persistRecordings<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${record.extractBody}\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> extractBody<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">WireMockServer</span> server<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Before</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setUp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        server <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WireMockServer</span><span class=\"token punctuation\">(</span>port<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        server<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        server<span class=\"token punctuation\">.</span><span class=\"token function\">startRecording</span><span class=\"token punctuation\">(</span><span class=\"token function\">config</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@After</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">tearDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        server<span class=\"token punctuation\">.</span><span class=\"token function\">stopRecording</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        server<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">RecordSpec</span> <span class=\"token function\">config</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">recordSpec</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">forTarget</span><span class=\"token punctuation\">(</span><span class=\"token function\">recordingServerUrl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">makeStubsPersistent</span><span class=\"token punctuation\">(</span>persistRecordings<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">extractTextBodiesOver</span><span class=\"token punctuation\">(</span>extractBody<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This class proxies all the requests to the real API, and stores them in the default folder when configured. The URL of the server that we want to integrate with is defined in the abstract method <code class=\"language-text\">recordingServerUrl</code>. This way each test can define a different endpoint, and we are not limited to a single external endpoint.</p>\n<p>Why not every time? We don’t want new files being created each time a test runs. Instead, this is a conscious decision, triggered with this script target:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function-name function\">goal_refresh-recordings</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token assign-left variable\">RECORD_PERSIST</span><span class=\"token operator\">=</span>true <span class=\"token assign-left variable\">RECORD_EXTRACTBODY</span><span class=\"token operator\">=</span><span class=\"token number\">0</span> ./gradlew clean integration\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>After that the new recordings are present and ready to be used. This can be done manually or integrated into a pipeline, to make sure that it happens often.</p>\n<p><em>NOTE:</em> If the <em>Third Party API</em> is secured through <code class=\"language-text\">mTLS</code>, you can still make this setup work by making <em>WireMock</em> aware of the keystore that your code uses to connect to it, by creating a custom config for the <em>WireMock</em> server:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">server <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WireMockServer</span><span class=\"token punctuation\">(</span><span class=\"token function\">options</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">trustStorePath</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span><span class=\"token function\">getProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"javax.net.ssl.keyStore\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">trustStorePassword</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"changeit\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">port</span><span class=\"token punctuation\">(</span>port<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Summary</h2>\n<p>The setup contains a bit of magic, but the result is quite simple to use. This way, you can achieve a great testing coverage without compromising the development experience, all while keeping your core unit tests slim and fast. If you have fought with out-of-sync mocks before, you will see the advantage!</p>\n<p><em>EDIT 05/08/2019:</em> Added support for multiple external APIs</p>","frontmatter":{"layout":"post","title":"Recording APIs with WireMock","path":"/recording-apis-with-wiremock/","categories":["Java","WireMock","SpringBoot","Testing"],"date":"2018/09/10","draft":false,"description":"Using WireMock to record third party API calls you can get high quality mocks that reflect reality and are much easier to maintain","canonical":null,"image":null}},"related":{"nodes":[{"frontmatter":{"title":"Mock verification in Kotlin using MockK and Atrium","path":"/mock-verification-in-kotlin/","date":"2019/05/27"}},{"frontmatter":{"title":"How to split the deployment of your front end and back end with the help of Consumer Driven Contract Testing","path":"/split-frontend-backend-deployment-with-cdcs/","date":"2019/11/12"}}]},"previous":{"frontmatter":{"title":"Angular from the perspective of a React fan - Part 3","path":"/angular-from-react-part3/","date":"2018/07/07"}},"next":{"frontmatter":{"title":"Replacing ESLint with prettier","path":"/replacing-eslint-with-prettier/","date":"2018/08/29"}}},"pageContext":{"related":["/split-frontend-backend-deployment-with-cdcs/","/mock-verification-in-kotlin/"],"previous":"/angular-from-react-part3/","next":"/replacing-eslint-with-prettier/"}},"staticQueryHashes":[],"slicesMap":{}}